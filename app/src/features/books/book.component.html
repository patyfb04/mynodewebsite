<div *ngIf="isAdmin" class="bookClass">
  <div>
    <h4>BOOKS </h4>
    <img class="icon-button right" src="./../../assets/icons/add-create-new.svg" *ngIf="!display"
      (click)="displayForm('create', 0)" />
    <img class="icon-button right" src="./../../assets/icons/close-delete-minus.svg" *ngIf="display"
      (click)="displayForm('create', 0)" />
  </div>

  <div *ngIf="display">
    {{ isEdit? 'Edit': 'Create '}} Book

    <form [formGroup]="myForm" (ngSubmit)="onSubmit(myForm)" enctype="multipart/form-data">
      <!-- <div>
        <label>
          Author:
          <mat-form-field>
            <input type="text" placeholder="Enter author name" [formControl]="author" matInput [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let option of filteredOptions | async" [value]="option.name"
                (onSelectionChange)="onAuthorChange(option)">
                {{option.name}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

        </label>
      </div> -->

       <div class="form-group">
        <label for="file">Book Cover Image:</label>
        <label for="thumbnail" class="file-upload">
          <img alt="edit" class="icon-button table" src="./../../assets/icons/backup-cloud-server.svg"/> 
          {{ filename }}
      </label>
        <input formControlName="thumbnail" id="thumbnail" name="thumbnail" type="file" class="form-control" (change)="onFileChange($event)">
      </div> 

      <!-- <div>
        <label>
          Title:
          <input formControlName="title" placeholder="Book title" type="text">
        </label>
      </div>
      <div>
        <label>
          Status:
          <mat-form-field appearance="fill">
            <select matNativeControl required #mySelect [formControl]="bookStatus"
              (change)="onStatusChange(mySelect.value)">
              <option value="In Progress">In Progress</option>
              <option value="Published">Published</option>
              <option value="Cancelled">Cancelled</option>
            </select>
          </mat-form-field>
        </label>
      </div>
      <div>
        <label>
          Link:
          <input formControlName="link" placeholder="Book link" type="text">
        </label>
      </div> -->
      <button type="submit">Save</button> &nbsp;
      <button type="reset" *ngIf="!isEdit">Clear</button>
      <button type="button" *ngIf="isEdit" (click)="display = false">Cancel</button>
    </form>
  </div>
  <div>

    <mat-form-field class="search">
      <input matInput type="text" (keyup)="doFilter($event)"
        placeholder="Type the book title, author name, status or link to search">
    </mat-form-field>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" [ngClass]="'grid'" matSort>

      <ng-container matColumnDef="thumbnail">
        <th mat-header-cell *matHeaderCellDef> Thumbnail </th>
        <td mat-cell *matCellDef="let element" (click)="displayForm('edit',element.id)"> <img
            src="{{serverUrl}}{{element.thumbnail}}" width="30px"
            *ngIf="element.thumbnail !== null"></td>
      </ng-container>

      <ng-container matColumnDef="author">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Author </th>
        <td mat-cell *matCellDef="let element" (click)="displayForm('edit',element.id)"> {{element.authorName}} </td>
      </ng-container>

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let element" (click)="displayForm('edit',element.id)"> {{element.title}} </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let element" (click)="displayForm('edit',element.id)"> {{element.status }} </td>
      </ng-container>

      <ng-container matColumnDef="link">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Link </th>
        <td mat-cell *matCellDef="let element"> 
          <img alt="edit" class="icon-button table" src="./../../assets/icons/network-publish-send.svg" 
           (click) ="goToUrl(element.link)" 
           *ngIf="element.link.length >= 5"
           style="cursor: pointer"/>
        </td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element">
          <img alt="edit" class="icon-button table" src="./../../assets/icons/draw-edit-new.svg"
            (click)="displayForm('edit',element.id)" /> &nbsp;
          <img alt="delete" class="icon-button table" src="./../../assets/icons/cancel-close-delete.svg"
            (click)="delete(element.id)" />
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of books">
    </mat-paginator>

  </div>

</div>

<div *ngIf="!isAdmin">
  BOOK PAGE IN WEBSITE
  <br>

</div>